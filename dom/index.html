<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Tutorial with CodeMirror</title>
    <link rel="stylesheet" href="codemirror/codemirror.min.css">
    <link rel="stylesheet" href="codemirror/monokai.min.css">
    <script src="codemirror/codemirror.min.js"></script>
    <script src="codemirror/javascript.min.js"></script>
    <link rel="stylesheet" href="custom.css">
    <script src="custom.js" defer></script>
</head>

<body>
    <div id="container">
        <header>
            <h1>JavaScript DOM Manipulation Tutorial</h1>
        </header>


        <div id="info">
            <div id="text">

                <p>DOM steht f√ºr Document Object Model und erlaubt den Zugriff auf das HTML-Dokument als w√§re es ein JavaScript Objekt.</p>

                <p>Im JavaScript ist mit <code>document</code> das HTML-Dokument gemeint.</p>

                <div class="important">Die Beispiele bestehen immer aus folgenden Elementen:
                    <dl>
                        <dt>Beschreibung</dt>
                        <dt>Vorschau</dt>
                        <dd>Inhalt wird durch das Skript ver√§ndert</dd>
                        <dt>HTML Code</dt>
                        <dd>Zeigt die HTML Struktur die in der Vorschau verwendet wird
                            <br>Achtet dabei auf die ID (z.B. <code>id="code1"</code> / <code>#code1</code>)
                        </dd>
                        <dt>Skript</dt>
                        <dd>Hier m√ºsst ihr das Skript bearbeiten. 
                            <br>Durch den Button "<b>Skript ausf√ºhren</b>" wird die Vorschau aktualisiert. 
                            <br>Verwendet immer die ID aus dem HTML Code, damit die richtige Voschau ver√§ndert wird.
                            In den Beispielen ist sie aber immer jedoch bereits gesetzt.</dd>
                    </dl>
                </div>



                <!-- ============================================================================================== -->
                <article>
                    <h2>Query</h2>

                    <p><code>document</code> verweist auf das HTML-Dokument selbst. 
                        Um Elemente zu bearbeiten m√ºssen wir sie selektieren.
                        Daf√ºr gibt es die Funktion <code>querySelector</code>. Die Abfrage verwendet die gleiche Syntax wie aus CSS bekannt.</p>

                    <p><code>document.querySelector("#exampleA")</code> gibt das Element mit der ID <em>exampleA</em> zur√ºck.</p>
                    <p><code>document.querySelector(".things")</code> gibt das Element mit der Class <em>things</em> zur√ºck.</p>

                    <p class="important"><code>querySelector</code> gibt immer nur den ersten Treffer zur√ºck!</p>

                    <div id="code1" class="html_example">
                        <div class="box">
                            .box
                        </div>
                    </div>

                    <code><pre>
&lt;div id&#x3D;&quot;code1&quot;&gt;
  &lt;div class&#x3D;&quot;box&quot;&gt;
    .box
  &lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
</pre></code>
                    
                    <section>
                        <textarea>
// Vorschau f√ºr diese Aufgabe ausw√§hlen
const htmlBlock = document.querySelector("#code1");

const theBox = htmlBlock.querySelector(".box");
theBox.style.color = "white";
theBox.style.backgroundColor = "blue";
                    </textarea>
                        <button>Skript ausf√ºhren</button>                        
                    </section>
                    <p>Das Skript ver√§ndert dynamisch das Style vom Element.</p>
                    <div class="exercise">
                        <h3>Aufgabe</h3> 
                        <p>√Ñndere die Farbe der Box und die der Schrift.</p>
                        <p>Vergr√∂√üere .box auf 200px x 250px (width x height)</p>
                    </div>
                </article>
                <!-- ============================================================================================== -->


                <article>
                    <h2>Elemente generieren</h2>

                    <p>Wir k√∂nnen auch dynamisch Elemente in die DOM hinzuf√ºgen.</p>
                    <p>Die Elemente m√ºssen zuerst mit <code>createElement</code> im <code>document</code> erzeugt werden.</p>
                    <p>Anschlie√üend k√∂nnen sie als Kind-Elemente mit <code>appendChild</code> angeh√§ngt werden.</p>
                    
                    <div id="code2" class="html_example">
                        <div class="container">
                            <p>container</p>
                        </div>
                    </div>

                    <code><pre>
&lt;div id&#x3D;&quot;code2&quot; class&#x3D;&quot;html_example&quot;&gt;
    &lt;div class&#x3D;&quot;container&quot;&gt;
        &lt;p&gt;container&lt;&#x2F;p&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
</pre></code>
                    
                    <section>
                        <textarea>
const htmlBlock = document.querySelector("#code2");

// Container ausw√§hlen
const container = htmlBlock.querySelector(".container");

// neues Element definieren
const newItem = document.createElement("div");
// im neuen Element HTML setzen
newItem.innerHTML = "<p>test</p>";

// Element in den Container einf√ºgen
container.appendChild(newItem);
                    </textarea>
                        <button>Skript ausf√ºhren</button>                        
                    </section>
                    <p>Im Beispiel setzen wir im neuen Element direkt HTML Werte mit <code>innerHTML</code>.</p>
                    <p>Die Farbe und Dimensionen vom <code>div</code> sind im CSS vordefinitert.</p>

                    <div class="exercise">
                        <h3>Aufgabe</h3> 
                        <ol>
                            <li>√Ñndere das Skript so dass ein Element hinzugef√ºgt wird mit dem Text "Hello World", 
                                dabei soll das erste Wort fett (<code>&lt;b&gt;</code>) ausgeben weden.</li>
                            <li>Das neue Element soll die ID "hi" erhalten (<code>newItem.id = "hi"</code>)</li>
                            <li>Nachdem das Skript einmal ausgef√ºhrt wurde und ein Element mit der ID "hi" erstellt wurde, 
                                √§ndere das Skript so ab das es wieder entfernt wird. 
                                <br>Nutze dazu die Funktion <code>container.removeChild</code>. Es erwartet ein Element z.B. vom <code>querySelector</code>.
                                <br>Achte dabei nicht erneut ein Element zu erzeugen.
                            </li>
                        </ol>
                        
                    </div>
                </article>
                <!-- ============================================================================================== -->


                <article>
                    <h2>Events</h2>

                    <p>Wir k√∂nnen auf Interaktion auf der Seite ("Events") mit "Event Listener" reagieren.</p>
                    <p>Event Listener werden am Element √ºber <code>addEventListener</code> gesetzt. 
                        Es gibt sehr viele verschiedene Events, aber f√ºr uns reicht "click" (d.h. ein Mausklick).</p>
                    <p>Der erste Parameter bestimmt den Event-Typ, hier "click", der zweite Parameter ist 
                        eine sogenannter Callback-Funktion, die aufgerufen wird wenn das Event eintritt. </p>
                    <p>Die Callback-Funktion erh√§lt einen Parameter (hier <code>e</code>) mit Informationen √ºber das Event, 
                        dabei ist <code>e.target</code> das Element das den Event ausgel√∂st hat.</p>
                        

                    <div id="code3" class="html_example">
                        <button>Click me!</button>
                    </div>

                    <code><pre>
&lt;div id&#x3D;&quot;code3&quot; class&#x3D;&quot;html_example&quot;&gt;
    &lt;button&gt;Click me!&lt;&#x2F;button&gt;
&lt;&#x2F;div&gt;
</pre></code>
                    
                    <section>
                        <textarea>
const htmlBlock = document.querySelector("#code3");
const button = htmlBlock.querySelector("button");

button.addEventListener("click", function(e){
    const sender = e.target;
    sender.innerText = "üòÅ";
});



                    </textarea>
                        <button>Skript ausf√ºhren</button>                        
                    </section>
                    <p><br>Die Callback-Funktion kennt nicht automatisch das Element das es aufgerufen hat.
                        <br>Im Beispiel ist <code>e.target</code> bzw.  <code>sender</code> das Button. </p>
                    
                    <div class="exercise"><h3>Aufgabe</h3>
                        <ol>
                            <li>Setze die Hintergrundfarbe vom Button nach dem Click.</li>
                            <li>Merke dir den Status vom Knopf und √§ndere die Farbe nach jeden Click. 
                                Setzte dazu ein boolean <code>let</code> variable au√üerhalb vom Callback.</li>
                            <li>Gehe zur√ºck zu Aufgabe 1 und setze einen Click Event-Listener an das <code>div</code>. 
                                Beim anklicken soll sich die Hintergrundfarbe √§ndern.</li>
                        </ol>                        
                    </div>
                </article>


                <!-- ============================================================================================== -->


                <article>
                    <h2>Inhalte dynamisch anzeigen</h2>

                    <p>Mit Styles k√∂nnen wir dynamisch Elemente anzeigen und ausblenden.<br>
                    In CSS versteckt die Regel <code>display:none;</code> ein Element.<br>
                    Die Regel <code>display:block;</code> zeigt es wieder an, als Block-Element.</p>
                    <p>Im Skript nutzen wir <code>querySelectorAll</code> um alle Element vom Typ auszuw√§hlen. <br>
                    Wir k√∂nnen √ºber die Element mit <code>forEach</code> iterieren.</p>
                    <p>Im Skript m√ºssen wir die Event-Listener erst registieren. Beim Click-Event verstecken wir erst alle Tabs und zeigen dann den aktiven Tab an.</p>
                    <p>Um die Tabs (button) mit dem Tab-Inhalt (div) zu verkn√ºpfen nutzen wir ein <code>data-*</code> Attribut. 
                        Solche Attribute sind frei definierbar, m√ºssen aber mit data- beginnen. 
                        Im Skript sind sie √ºber <code>dataset</code> aufrufbar (hier <code>data-tab</code> &rarr; <code>dataset.tab</code>).</p>


                    <div id="code4" class="html_example">                        
                        <button data-tab="tabA">Tab A</button>
                        <button data-tab="tabB">Tab B</button>
                        <div id="tabA">Hello, I'm #tabA</div>
                        <div id="tabB">Me, I am #tabB</div>                        
                    </div>

                    <code><pre>
&lt;div id&#x3D;&quot;code4&quot; class&#x3D;&quot;html_example&quot;&gt;                        
    &lt;button data-tab&#x3D;&quot;tabA&quot;&gt;Tab A&lt;&#x2F;button&gt;
    &lt;button data-tab&#x3D;&quot;tabB&quot;&gt;Tab B&lt;&#x2F;button&gt;
    &lt;div id&#x3D;&quot;tabA&quot;&gt;Hello, I&#39;m #tabA&lt;&#x2F;div&gt;
    &lt;div id&#x3D;&quot;tabB&quot;&gt;Me, I am #tabB&lt;&#x2F;div&gt;                        
&lt;&#x2F;div&gt;
</pre></code>
                    
                    <section>
                        <textarea>
const htmlBlock = document.querySelector("#code4");
const buttons = htmlBlock.querySelectorAll("button");
const tabs = htmlBlock.querySelectorAll("div");

// Event-Listener f√ºr jeden Button setzen
buttons.forEach(function(button){
    button.addEventListener("click", function(e){
        // alle Tab-Inhalte verstecken
        tabs.forEach(function(tab){
            tab.style.display = "none";
        });
    
        // aktiven Tab ermitteln und passenden Inhalt anzeigen
        const activeTab = e.target.dataset.tab;
        htmlBlock.querySelector("#" + activeTab).style.display = "block";
    });
});
                    </textarea>
                        <button>Skript ausf√ºhren</button>                        
                    </section>
                                       
                    <div class="exercise">
                        <h3>Aufgabe</h3>
                        <p>Erweitere das Skript damit nach der Initialierung der zweite Tab automatisch ausgeblendet wird.
                            <br>Zum testen musst du die Seite neu laden. (Denk daran dein Skript zu kopieren!)
                        </p>                   
                        <p>Tipp: Du kann das verstecken der Tab-Inhalte in eine Funktion z.B. <code>hideTabs</code> auslagern.</p>
                    </div>
                </article>

                <!-- ============================================================================================== -->


                <article>
                    <h2>Dynamisch Daten laden und anzeigen</h2>

                    <p class="important">Diese Beispiel funktioniert nur auf einem Server! 
                        Die Funktion <code>fetch</code> wird lokal blockiert.</p>

                    <p>Im Projekt haben wir eine JSON Datei mit Preisdaten. Mit <code>fetch</code> k√∂nnen wir Daten asynchron nachladen, 
                        das bedeutet wir m√ºssen auf das Ergebnis warten. Das k√∂nnen wir mit der Funktion <code>then</code>.                        
                    </p>
                    <p>Im Skript laden wir die Daten, greifen auf die JSON Werte zu und iterieren 
                        dann durch die einzelnen Elemente und rufen anschlie√üend <code>render</code> auf.</p>


                    <div id="code5" class="html_example">                        
                        <div class="container"></div>
                    </div>

                    <code><pre>                        
&lt;div id&#x3D;&quot;code5&quot; class&#x3D;&quot;html_example&quot;&gt;                        
    &lt;div class&#x3D;&quot;container&quot;&gt;&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
</pre></code>
                    
                    <section>
                        <textarea>
const htmlBlock = document.querySelector("#code5");
const container = htmlBlock.querySelector(".container");

// leere den Container
container.innerHTML = "";

// Funktion wird nach Laden der Daten aufgerufen
function render(el){
    // in der Console siehst du die Datenstruktur
    console.log(el);
    const paragraph = document.createElement("p");
    paragraph.innerText = el.name;    
    container.appendChild(paragraph);
}

// lade data.json
fetch("data.json")
    // extrahiere Inhalt als JSON
    .then(function(data){ return data.json(); })
    // iteriere durch jeden Eintrag
    // (Hinweis: Klappt hier nur weil Daten im JSON ein Array sind)
    .then(function(json){ 
        json.forEach(function(j){ render(j); }) 
    });
                    </textarea>
                        <button>Skript ausf√ºhren</button>                        
                    </section>

                    <p>In der console wird die Datenstrukur ausgegeben <code>{ name: "", price: 0 }</code></p>
                                       
                    <div class="exercise"><h3>Aufgabe</h3>
                   <p>Erstelle in <code>render</code> statt einem <code>p</code> ein <code>div</code>. 
                   Im <code>div</code> gebe neben <code>name</code> auch <code>price</code> aus, umschlossen von 
                   einem <code>span</code> Element. Das passende style ist bereits definiert.</p>
                   <p><code>&lt;div&gt;name &lt;span&gt;price&lt;/span&gt;&lt;/div&gt;</code></p>
                    </div>
                </article>

            </div>
        </div>
    </div>
</body>
</html>